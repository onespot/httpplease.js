!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.httpplease=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){var c=new Error(a);c.name="RequestError",this.name=c.name,this.message=c.message,c.stack&&(this.stack=c.stack),this.toString=function(){return this.message};for(var d in b)b.hasOwnProperty(d)&&(this[d]=b[d])}var e=a("./response"),f=a("./utils/extractResponseProps"),g=a("xtend");d.prototype=g(Error.prototype),d.prototype.constructor=d,d.create=function(a,b,c){var g=new d(a,c);return e.call(g,f(b)),g},b.exports=d},{"./response":4,"./utils/extractResponseProps":6,xtend:9}],2:[function(a,b,c){"use strict";function d(a,b){function c(c,d){var g,j,o,p,q,r;for(c=new l(m(a,c)),f=0;f<b.length;f++)j=b[f],j.processRequest&&j.processRequest(c);for(f=0;f<b.length;f++)if(j=b[f],j.createXHR){g=j.createXHR(c);break}g=g||new h,c.withCredentials&&(g.withCredentials=!0),c.xhr=g,o=n(i(function(a){clearTimeout(q),g.onload=g.onerror=g.onabort=g.onreadystatechange=g.ontimeout=g.onprogress=null;var h=e(c,a),i=h||k.fromRequest(c);for(f=0;f<b.length;f++)j=b[f],j.processResponse&&j.processResponse(i);h&&c.onerror&&c.onerror(h),!h&&c.onload&&c.onload(i),d&&d(h,h?void 0:i)})),r="onload"in g&&"onerror"in g,g.onload=function(){o()},g.onerror=o,g.onabort=function(){o()},g.onreadystatechange=function(){if(4===g.readyState){if(c.aborted)return o();if(!r){var a;try{a=g.status}catch(b){}var b=0===a?new Error("Internal XHR Error"):null;return o(b)}}},g.ontimeout=function(){},g.onprogress=function(){},g.open(c.method,c.url),c.timeout&&(q=setTimeout(function(){c.timedOut=!0,o();try{g.abort()}catch(a){}},c.timeout));for(p in c.headers)c.headers.hasOwnProperty(p)&&g.setRequestHeader(p,c.headers[p]);return g.send(c.body),c}a=a||{},b=b||[];var g,o=["get","post","put","head","patch","delete"],p=function(a){return function(b,d){return b=new l(b),b.method=a,c(b,d)}};for(f=0;f<o.length;f++)g=o[f],c[g]=p(g);return c.plugins=function(){return b},c.defaults=function(c){return c?d(m(a,c),b):a},c.use=function(){var c=Array.prototype.slice.call(arguments,0);return d(a,b.concat(c))},c.bare=function(){return d()},c.Request=l,c.Response=k,c.RequestError=j,c}function e(a,b){if(a.aborted)return o("Request aborted",a,{name:"Abort"});if(a.timedOut)return o("Request timeout",a,{name:"Timeout"});var c,d=a.xhr,e=Math.floor(d.status/100);switch(e){case 0:case 2:if(!b)return;return o(b.message,a);case 4:if(404===d.status&&!a.errorOn404)return;c="Client";break;case 5:c="Server";break;default:c="HTTP"}var f=c+" Error: The server returned a status of "+d.status+' for the request "'+a.method.toUpperCase()+" "+a.url+'"';return o(f,a)}var f,g=a("../plugins/cleanurl"),h=a("./xhr"),i=a("./utils/delay"),j=a("./error"),k=a("./response"),l=a("./request"),m=a("xtend"),n=a("./utils/once"),o=j.create;b.exports=d({},[g])},{"../plugins/cleanurl":10,"./error":1,"./request":3,"./response":4,"./utils/delay":5,"./utils/once":7,"./xhr":8,xtend:9}],3:[function(a,b,c){"use strict";function d(a){var b="string"==typeof a?{url:a}:a||{};this.method=b.method?b.method.toUpperCase():"GET",this.url=b.url,this.headers=b.headers||{},this.body=b.body,this.timeout=b.timeout||0,this.errorOn404=null!=b.errorOn404?b.errorOn404:!0,this.onload=b.onload,this.onerror=b.onerror,this.withCredentials=b.withCredentials||!1}d.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this)},d.prototype.header=function(a,b){var c;for(c in this.headers)if(this.headers.hasOwnProperty(c)&&a.toLowerCase()===c.toLowerCase()){if(1===arguments.length)return this.headers[c];delete this.headers[c];break}return null!=b?(this.headers[a]=b,b):void 0},b.exports=d},{}],4:[function(a,b,c){"use strict";function d(a){this.request=a.request,this.xhr=a.xhr,this.headers=a.headers||{},this.status=a.status||0,this.text=a.text,this.body=a.body,this.contentType=a.contentType,this.isHttpError=a.status>=400}var e=a("./request"),f=a("./utils/extractResponseProps");d.prototype.header=e.prototype.header,d.fromRequest=function(a){return new d(f(a))},b.exports=d},{"./request":3,"./utils/extractResponseProps":6}],5:[function(a,b,c){"use strict";b.exports=function(a){return function(){var b=Array.prototype.slice.call(arguments,0),c=function(){return a.apply(null,b)};setTimeout(c,0)}}},{}],6:[function(a,b,c){"use strict";var d=a("xtend");b.exports=function(a){var b=a.xhr,c={request:a,xhr:b};try{var e,f,g,h={};if(b.getAllResponseHeaders)for(e=b.getAllResponseHeaders().split("\n"),f=0;f<e.length;f++)(g=e[f].match(/\s*([^\s]+):\s+([^\s]+)/))&&(h[g[1]]=g[2]);c=d(c,{status:b.status,contentType:b.contentType||b.getResponseHeader&&b.getResponseHeader("Content-Type"),headers:h,text:b.responseText,body:b.response||b.responseText})}catch(i){}return c}},{xtend:9}],7:[function(a,b,c){"use strict";b.exports=function(a){var b,c=!1;return function(){return c||(c=!0,b=a.apply(this,arguments)),b}}},{}],8:[function(a,b,c){b.exports=window.XMLHttpRequest},{}],9:[function(a,b,c){function d(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a}b.exports=d},{}],10:[function(a,b,c){"use strict";b.exports={processRequest:function(a){a.url=a.url.replace(/[^%]+/g,function(a){return encodeURI(a)})}}},{}]},{},[2])(2)});